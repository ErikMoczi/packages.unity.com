<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unity Mobile Notifications: README.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unity Mobile Notifications
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# Unity Mobile Notifications Package</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;**Supported features:**</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;- Schedule local repeatable or one-time notifications.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;- Cancel scheduled or already displayed notifications.</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;- Android: </div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  - Create and modify notification channels/categories on Android Oreo and above</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  - Set custom notification icons.</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;- iOS:</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  - Use the Apple Push Notification Service  (APNs) to send remote notifications.</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  - Modify remote notification content if they are received while the app is running.</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  - Group notification into threads (only  supported on iOS 12+)</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;**Requirements:**</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;- Supports Android 4.1 (API 16)/iOS 10 and newer.</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;- Compatible with Unity 2018.2 and newer.</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;## Summary:</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;The runtime API is split into two classes AndroidNotificationCenter and iOSNotificationCenter which respectively can be used to schedule and manage notifications for Android and iOS respectively. You can </div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;**Android:**</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;- **Create a notification channel:**</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  Every local notification must belong to a notification channel, notification channels are only supported by the system on Android Oreo (9.0) and above. On previous versions the channel behaviour is simulate, therefore settings such as priority  (`Importance`) should be set on the channel.</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  ```</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  var c = new AndroidNotificationChannel()</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      Id = &quot;channel_id&quot;,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      Name = &quot;Default Channel&quot;,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      Importance = Importance.High,</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      Description = &quot;Generic notifications&quot;,</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  AndroidNotificationCenter.RegisterNotficationChannel(c);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  ```</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;- **Send a simple notification:**</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  This example show how to schedule a simple notification with some text in it.</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  ```</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  </div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  var notification = new AndroidNotification();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  notificationTitle = &quot;SomeTitle&quot;;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  notification.Text = &quot;SomeText&quot;;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  notification.FireTime = System.DateTime.Now.AddMinutes(5);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  </div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  //You should specify a custom icon for each notification otherwise a default Unity </div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  //icon will be shown in the status bar when instead. You can configure notification </div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  // icons in &quot;Edit -&gt; Project Settings -&gt; Mobile Notification Settings&quot;.</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  notification.Icon = &quot;my_custom_icon_id&quot;;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  </div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  //Optionally you can also set a large icon which will be shown in notification view in // place of the small icon (which will be placed in a small badge atop the large icon)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  notification.LargeIcon = &quot;my_custom_large_icon_id&quot;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  </div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  // When scheduling each notification is assigned an unique identifier number</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  // which can later be used to track notifications status or cancel it.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  var identifier = AndroidNotificationCenter.SendNotification(n, &quot;channel_id&quot;);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  </div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  //You can check if the notification was already delivered and perform an action</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  //depending on the result. However notification status can only be tracked on Android //Marshmallow (6.0)  and anove.</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  if ( CheckScheduledNotificationStatus(identifier) == NotificationStatus.Scheduled)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   // Replace the currently sheduled notification with a new notification.</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   UpdateScheduledNotifcation(identifier, newNotification);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  else if ( CheckScheduledNotificationStatus(identifier) == NotificationStatus.Delivered)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   //Remove the notification from the status bar</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   CancelNotification(identifier)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  else if ( CheckScheduledNotificationStatus(identifier) == NotificationStatus.Unknown)</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      var identifier = AndroidNotificationCenter.SendNotification(n, &quot;channel_id&quot;);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  </div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  ```</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;- **Handling received notifications when the app is running**</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  You can subscribe to the *AndroidNotificationCenter.OnNotificationReceived* even to receive callbacks whenever a notification is delivered if the app is running.</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  ```</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  AndroidNotificationCenter.OnNotificationReceived +=(int identifier, AndroidNotification notification, string channel)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   var msg = &quot;Notification received : &quot; + identifier + &quot;\n&quot;;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   msg += &quot;\n Notification received: &quot;;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   msg += &quot;\n .Title: &quot; + notification.Title;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   msg += &quot;\n .Body: &quot; + notification.Text;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   msg += &quot;\n .Channel: &quot; + channel.Name;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   Debug.Log(msg);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  };</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  ```</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;**iOS:**</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;- **Request authorization:**</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  Request the system for permission to post local and receive remote notifications. After completion you can retrieve the *DeviceToken* if you created the request with *registerForRemoteNotifications* set to true and the app succesful registered on the APN. It can be ued to send push notifications to the device. See [Apple Developer Site](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/HandlingRemoteNotifications.html#//apple_ref/doc/uid/TP40008194-CH6-SW1) on how to add push notification support to your app. </div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  The user migh only grants permission for certain notification features (in samle below we requested the permission to show UI Alert dialogs and show a badge on the app icon) in this case *RequestAuthorizationRequest.Granted* would still be *True* and you can check the actual authorization status by *iOSNotificationCenter.GetNotificationSettings*. </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  Alternatively you can enable *Request Authorization on App Launch* in *Edit -&gt; Project Settings -&gt; Mobile Notification Settings* then the app will automatically request for authorization when it&#39;s launched. Afterwards you might call this method again to determine the current authorization status but the UI system prompt will not be shown again if the user has already granted or denied authorization for this app.</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  ```</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  using (var req = new AuthorizationRequest(AuthorizationOption.AuthorizationOptionAlert | AuthorizationOption.AuthorizationOptionBadge, true))</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   while (!req.IsFinished)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;       yield return null;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   };</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  </div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   string res = &quot;\n RequestAuthorization: \n&quot;;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   res += &quot;\n finished: &quot; + req.IsFinished;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   res += &quot;\n granted :  &quot; + req.Granted;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   res += &quot;\n error:  &quot; + req.Error;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   res += &quot;\n deviceToken:  &quot; + req.DeviceToken;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   Debug.Log(res);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  ```</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;- **To Send a Simple and Cancel Notification in X seconds:**</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  ```</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  var timeTrigger = new iOSNotificationTimeIntervalTrigger()</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   TimeInterval = new TimeSpan(0, minutes, seconds),</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   Repeats = false</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  };</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;               </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  var notification = new iOSNotification()</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   // You can optional specify a custom Identifier which can later be </div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   // used to cancel the notification, if you don&#39;t an unique string </div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   // will be generated automtically.</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   //Identifier = &quot;_notification_01&quot; </div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   Title = title,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   Body = &quot;Scheduled at: &quot; + DateTime.Now.ToShortDateString() + &quot; triggered in 5 seconds&quot;,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   Subtitle = &quot;This is a subtitle, something, something important...&quot;,</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   ShowInForeground = true,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   ForegroundPresentationOption = foregoungOption,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   CategoryIdentifier = &quot;category_a&quot;,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   ThreadIdentifier = thread,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   Trigger = timeTrigger,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  };</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;       </div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  iOSNotificationCenter.ScheduleNotification(notification);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  // You can cancel the notification if wasn&#39;t yet triggered:</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  iOSNotificationCenter.RemoveScheduledNotification(notification.Identifier);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  </div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  //If the notification was already displayed to the user, you can remove it from the </div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  //Notification Center:</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  iOSNotificationCenter.RemoveDeliveredNotification(notification.Identifier)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  ```</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;- **Other triggers:**</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  Besides the time interval trigger you can also use calendar and location trigger:</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  ```</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  //All the fields in iOSNotificationCalendarTrigger are optional but you need to set </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  //atleast one for it work. For example if you only set the hour and minute fields the  //system will automitcally trigger the notification on the next specified hour and minite.</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  var calendarTrigger = new iOSNotificationCalendarTrigger()</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   // Year = 2018,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   // Month = 8,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   //Day = 30,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   Hour = 12,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   Minute = 0,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   // Second = 0</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   Repeats = false</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  };</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  </div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  // You can also create location trigger when you want to schedule the delivery of a </div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  // notification when the device enters or leaves a specific geographic region.</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  // Before scheduling any notifications using this trigger,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  // your app must have authorization to use Core Location and must have when-in-use </div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  // permissions. Use the Unity LocationService API to request for this authorization.</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  // See https://developer.apple.com/documentation/corelocation/clregion?language=objc for // additional information.</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  var locationTrigger = iOSNotificationLocationTrigger()</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   // The center coordinate is defined using the WGS 84 system.</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   // In this case the notification would be triggered if the user</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   // entered an area within a 250 meter radius around Eiffel Tower in Paris.</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   Vector2 Center = new Vector2(2.294498, 48.858263),</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   Radius = 250,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   NotifyOnEntry = true,</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   NotifyOnExit = false,</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  ```</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;- **Handling received notifications when the app is running **</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  You might want to perform a custom action instead of just showing a notification alert if it&#39;s triggered while the app is running:</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  ```</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  // By default if a local notification is triggered while the app that scheduled it is</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  // in the foreground an alert will not be shown for that notification.</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  // If you wish the notification to behave the same way as if the the app was not running</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  // you need to enable this `ShowInForeground` when scheduling the notification:&quot;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  notification.ShowInForeground = True</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  // In this case you will also need to specify it&#39;s &#39;ForegroundPresentationOption&#39;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  notification.ForegroundPresentationOption = (PresentationOption.NotificationPresentationOptionSound | PresentationOption.NotificationPresentationOptionAlert)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  // Alternatively you might wish to perform some other action, like displaying the </div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  // notification content using the in-game UI, when the notification is triggered.</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  // In this case you need to subscribe to the `OnNotificationReceived` which will be </div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  // called whenever a local or a remote notification is received (irregardless if it&#39;s shown in the foregound).</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  iOSNotificationCenter.OnNotificationReceived += notification =&gt;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   var msg = &quot;Notification received : &quot; + notification.Identifier + &quot;\n&quot;;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   msg += &quot;\n Notification received: &quot;;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   msg += &quot;\n .Title: &quot; + notification.Title;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   msg += &quot;\n .Badge: &quot; + notification.Badge;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   msg += &quot;\n .Body: &quot; + notification.Body;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   msg += &quot;\n .CategoryIdentifier: &quot; + notification.CategoryIdentifier;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   msg += &quot;\n .Subtitle: &quot; + notification.Subtitle;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   Debug.Log(msg);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  };</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  // When receiving remote notification while the app is running you might wish modify the // remote notification content or not show it at all. You can do this by subscribing </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  // to the `OnRemoteNotificationReceived` event. Please note that if you do this remote</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  // notifications will never be displayed when the app is running. If you still wish to </div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  // show an alert for it you&#39;ll have to schedule a local notification using the remote </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  // notifications content:</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  iOSNotificationCenter.OnRemoteNotificationReceived += notification =&gt;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   // When a remote notification is received modify it&#39;s contents and show it</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      // after 1 second.</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   var timeTrigger = new iOSNotificationTimeIntervalTrigger()</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;       TimeInterval = new TimeSpan(0, 0, 1),</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;       Repeats = false</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   };</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;               </div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   iOSNotification  n = new iOSNotification()</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;       Title = &quot;Remote : &quot; + notification.Title,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;       Body =  &quot;Remote : &quot; + notification.Body,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;       Subtitle =  &quot;RERemote: &quot; + notification.Subtitle,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;       ShowInForeground = true,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;       ForegroundPresentationOption = PresentationOption.NotificationPresentationOptionSound | PresentationOption.NotificationPresentationOptionAlert | PresentationOption.NotificationPresentationOptionBadge,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;       CategoryIdentifier = notification.CategoryIdentifier,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;       ThreadIdentifier = notification.ThreadIdentifier,</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;       Trigger = timeTrigger,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   };</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   iOSNotificationCenter.ScheduleNotification(n);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;           </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   Debug.Log(&quot;Rescheduled remote notifications with id: &quot; + notification.Identifier);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  };</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  ```</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;## FAQ</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;**Notifications with a location trigger do not work.**</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;Make sure the CoreLocation framework is added to your project. You can do this in the `Mobile Notification Settings` menu in the Unity Editor. Or by adding it manually to the Xcode project (or using the Unity Xcode API).</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
